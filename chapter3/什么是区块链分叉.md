# 什么是区块链分叉？

---

区块链的分叉主要分为“**软分叉**”和“**硬分叉**”。

## 什么是区块链分叉？

全球每个区块链节点都包含全部数据，都在最新的区块链上挖符合条件的区块，如果两个节点同时挖到新的区块，出现数据不一致，就会出现分叉现象。

假设当前区块链有三个区块，如下图：

![](/assets/007.png)

此时我们假设中国一个节点，美国一个节点，同时挖到矿，这两个节点都会把自己挖到的矿，链到自己本地的区块链上。

![](/assets/008.png)

当出现分叉后，两个节点会将“挖到矿”的信息同步到全球其他节点，以便于其他节点同步最新的数据后在最新的区块链上继续挖矿，此时会发生下列事件：

* 离中国节点较近的点，可能先同步“中国链”，并在此链上继续挖矿，链条会持续增长。
* 离美国节点较近的点，可能先同步“美国链”，并在此链上继续挖矿，链条会持续增长。
* 节点收到两个冲突的区块链同步信息，会判断哪条链的长度更长，会以长度更长的区块链为准（长度越长代表消耗的算力越多），最终全球的区块链会达成一致，消除分叉。

![](/assets/009.png)

## 什么是软分叉？

软分叉是临时的，当区块链系统升级后，在所有节点更新到最新版本之前，由于程序版本的差异可能会产生分叉，只要升级到最新的版本，分叉就会消除。

## 什么是硬分叉？

硬分叉是永久的，某些人或组织不按照规则来，新拉一个分支，并号召大家认可自己的链形成自己的分叉就是“硬分叉”。其中又以“**以太坊**”最为代表。

### 著名硬分叉案例——以太坊与以太经典

* 起因是 TheDAO（基于以太坊的去中心化自治基金）合约币被盗事件，由于程序漏洞被黑客窃取了大约 6000 万美元的合约币。
* 以太坊开发团队修改源码，强行将 192 万个区块的资金转移到另一个地址，“夺回”黑客控制的合约币。
* 大部分矿工认同这个修改，一分部矿工不认同这个修改，于是形成了两条链。
* 原链是“**以太经典（ETC）**”，新链是“**以太坊（ETH）**”。
* 大家继续在自己认可的链路上继续挖矿。